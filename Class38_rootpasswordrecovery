Class 38 05/09/2025

Root passowrd Recovery

Occurences:
===========
1) Whenever need server access (CHG's are INC's)
2) Root password locked and got the alert due to wrong password in scripts
3) disk failures
4) /var and / 100% full

c111xyz - rhel7.repo - change - CHG3421345 - planned activities (all new configurations and modifications)

c111abc - rhel.repo - incident - INC3434231 - sudden situations (service breakage/abnormal behaviour of the service)

RHEL7 Resolving steps:
======================
1) Root password recovery need downtime
2) need to get console access
3) reboot the server and catch at grub menu
4) edit the grub and modify kernel image line with "rd.break"
5) need to switch harddisk image by running below command
	# chroot /sysroot
6) need to run below command to remount root file system in read-write
	# mount -o remount,rw /
7) perform root password reset
	# cp /etc/shadow /etc/shadow
	# passwd -S root ===> if the account shows locked then need to release
	# passwd -U root 
	# passwd root ===> default passwd
8) reboot the server and check the root access


RHEL6 Resolving steps:
======================
1) Root password recovery need downtime
2) need to get console access
3) reboot the server and catch at grub menu and hit "e" to enter in grub menu
4) edit the grub and modify kernel image line with "init=/bin/bash"
5) need to run below command to remount root file system in read-write
	# mount -o remount,rw /
6) perform root password reset
	# cp /etc/shadow /etc/shadow
	# passwd -S root ===> if the account shows locked then need to release
	# passwd -U root 
	# passwd root ===> default passwd
7) reboot the server and check the root access
